import{A as S,B as V,C as A,E as B,D as R,g as p,r as h,j as m,o as s,c as l,l as y,s as $,H as E,k as i,p as v,I as C,F as K,m as N,n as d,y as _,a as T}from"./index-9d58c6ea.js";import{_ as U}from"./MoviesItem-c5cf47d0.js";const b=S("search",{state:()=>({searchArray:null,totalResults:0}),actions:{async getSearch(n="",a=1){if(n!="")try{const e=await V({method:"GET",url:`${A}/search/multi?query=${n}&include_adult=false&language=${B}&page=${a}`,headers:R});this.searchArray=e.data.results,this.totalResults=e.data.total_results}catch(e){console.error("Error in search.js",e)}else this.searchArray=null}}}),j={class:"search"},D={class:"container"},F=["onKeydown"],G={key:0,class:"search__content"},H={key:2,class:"search__text"},I={__name:"Search",setup(n){const a=b(),e=p(()=>a.searchArray),g=p(()=>a.totalResults);let c=h(!1);const f=async()=>{c.value=!0,a.searchArray=null,r.value+1,await a.getSearch(o.value,r.value),c.value=!1,window.scrollTo({top:0,behavior:"smooth"})};let o=h(""),r=h(1);const w=async()=>{a.searchArray=null,await a.getSearch(o.value,r.value)};return(M,u)=>{const k=m("loader"),x=m("vue-awesome-paginate");return s(),l("section",j,[y("div",D,[$(y("input",{type:"text",placeholder:"Найти фильм, сериал...",class:"search__input","onUpdate:modelValue":u[0]||(u[0]=t=>v(o)?o.value=t:o=t),onKeydown:C(w,["enter"])},null,40,F),[[E,i(o)]]),e.value?(s(),l("div",G,[(s(!0),l(K,null,N(e.value,t=>(s(),d(U,{key:t.id,type:t.media_type,content:t},null,8,["type","content"]))),128))])):_("",!0),i(c)?(s(),d(k,{key:1})):_("",!0),!e.value&&!i(c)?(s(),l("p",H," Результат пуст! ")):_("",!0),e.value?(s(),d(x,{key:3,"total-items":g.value,"items-per-page":20,"max-pages-shown":3,modelValue:i(r),"onUpdate:modelValue":u[1]||(u[1]=t=>v(r)?r.value=t:r=t),"on-click":f},null,8,["total-items","modelValue"])):_("",!0)])])}}},L={class:"main"},z={__name:"SearchView",setup(n){return(a,e)=>(s(),l("main",L,[T(I)]))}};export{z as default};
