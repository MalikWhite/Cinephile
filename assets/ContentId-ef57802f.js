import{g as h,r as w,j as x,q as V,o as c,n as y,w as R,k as m,c as i,s as b,l as n,v as S,t as l,F as f,m as $,x as k,y as _,p as I,z as N,a as g,T as j,A as B,B as C,C as D,D as E,E as z,b as F,u as G,G as L}from"./index-9d58c6ea.js";import{_ as M}from"./MoviesItem-c5cf47d0.js";const U={key:0,class:"content__intro"},Y={alt:"",class:"content__intro-bg"},q={class:"content__intro-block"},A={class:"content__intro-left"},O={class:"content__intro-left-title"},W={class:"content__intro-left-overview"},H={class:"content__intro-left-data"},J={key:0},K={class:"runtime"},P=n("i",{class:"fas fa-play"},null,-1),Q=n("span",null,"Смотреть трейлер",-1),X={class:"content__intro-right"},Z={alt:""},tt={class:"content__intro-bottom"},et=n("h2",{class:"content__intro-bottom-title"},"В главных ролях",-1),nt={key:1,class:"content__intro"},ot={class:"content__intro-film"},st=["src"],ct=n("i",{class:"fal fa-times"},null,-1),it=[ct],at={__name:"Intro",props:["type","content","video"],setup(t){const o=t,a=h(()=>{let r=o.content.runtime%60,s=Math.floor(o.content.runtime/60);return s?`${s}ч ${r}м`:`${r}м`});let e=w(!1);return(r,s)=>{const d=x("actors"),v=V("lazy");return c(),y(j,{name:"content__intro"},{default:R(()=>[t.content&&!m(e)?(c(),i("div",U,[b(n("img",Y,null,512),[[v,m(S)+t.content.backdrop_path]]),n("div",q,[n("div",A,[n("h1",O,l(t.content.title||t.content.name),1),n("p",W,l(t.content.overview),1),n("p",H,[n("span",null,l(new Date(t.content.first_air_date||t.content.release_date).getFullYear()+", "),1),(c(!0),i(f,null,$(t.content.genres,(u,p)=>(c(),i("span",{key:u.id},[k(l(u.name),1),p<t.content.genres.length-1?(c(),i("span",J,", ")):_("",!0)]))),128)),n("span",K,l(t.content.runtime?a.value:""),1)]),t.video?(c(),i("button",{key:0,class:"content__intro-left-btn",onClick:s[0]||(s[0]=u=>I(e)?e.value=!0:e=!0)},[P,k(),Q])):_("",!0)]),n("div",X,[b(n("img",Z,null,512),[[v,m(N)+t.content.poster_path]])]),n("div",tt,[et,g(d,{type:t.type,id:t.content.id,count:6},null,8,["type","id"])])])])):m(e)?(c(),i("div",nt,[n("div",ot,[t.video?(c(),i("iframe",{key:0,src:`https://www.youtube.com/embed/${t.video.key}?rel=0&showinfo=0`,title:"YouTube video player",frameborder:"0",allowfullscreen:""},null,8,st)):_("",!0),n("button",{class:"content__intro-close",onClick:s[1]||(s[1]=u=>I(e)?e.value=!1:e=!1)},it)])])):_("",!0)]),_:1})}}},rt={class:"content__budget container"},lt={class:"content__budget-items"},dt={class:"content__budget-item-title"},ut={class:"content__budget-item-descr"},_t={__name:"BudgetId",props:["content"],setup(t){const o=t,a=w([{id:1,title:"Бюджет",descr:o.content.budget?`${o.content.budget.toLocaleString()} $`:"Не известно"},{id:2,title:"Сборы",descr:o.content.revenue?`${o.content.revenue.toLocaleString()} $`:"Не известно"},{id:3,title:"Статус",descr:o.content.status},{id:4,title:"Исходное название",descr:o.content.original_title||o.content.original_name}]);return(e,r)=>(c(),i("div",rt,[n("div",lt,[(c(!0),i(f,null,$(a.value,s=>(c(),i("div",{class:"content__budget-item",key:s.id},[n("h2",dt,l(s.title),1),n("p",ut,l(s.descr),1)]))),128))])]))}},mt={key:0,class:"content__recom"},vt={class:"container"},ht={class:"content__recom-title"},yt={class:"content__recom-list"},gt={__name:"Recom",props:["recomId","type"],setup(t){return(o,a)=>t.recomId?(c(),i("div",mt,[n("div",vt,[n("h2",ht,l(t.recomId.length>0?"Рекомендации":"Рекомендации нет"),1),n("div",yt,[(c(!0),i(f,null,$(t.recomId,e=>(c(),y(M,{key:e.id,content:e,type:t.type},null,8,["content","type"]))),128))])])])):_("",!0)}},ft=B("videos",{state:()=>({movie:null,tv:null}),actions:{async getVideos(t,o){try{const e=(await C({method:"GET",url:`${D}/${t}/${o}/videos?language=en-US`,headers:E})).data.results;t=="movie"?this.movie=e[e.length-1]:this.tv=e[e.length-1]}catch{console.error("Error in videos.js")}}}}),$t=B("recommendation",{state:()=>({movie:null,tv:null}),actions:{async getRecommendation(t,o,a=1){try{const r=(await C({method:"GET",url:`${D}/${t}/${o}/recommendations?language=${z}&page=${a}`,headers:E})).data.results,s=[];r.forEach(d=>{s.length<4&&s.push(d)}),t=="movie"?this.movie=s:this.tv=s,console.log()}catch{console.error("Error in recomendation.js")}}}}),pt={key:0,class:"content-id"},wt={__name:"ContentId",props:["type"],setup(t){const o=t,a=F(),e=G(),r=ft(),s=$t(),d=h(()=>o.type=="movie"?e.movieID:e.tvID),v=h(()=>o.type=="movie"?r.movie:r.tv),u=h(()=>o.type=="movie"?s.movie:s.tv);return L(()=>{setTimeout(()=>{e.getInfoId(o.type,a.params.id),r.getVideos(o.type,a.params.id),s.getRecommendation(o.type,a.params.id)},500)}),(p,bt)=>{const T=x("loader");return d.value?(c(),i("section",pt,[g(at,{type:t.type,content:d.value,video:v.value},null,8,["type","content","video"]),g(_t,{content:d.value},null,8,["content"]),m(s)?(c(),y(gt,{key:0,recomId:u.value,type:t.type},null,8,["recomId","type"])):_("",!0)])):(c(),y(T,{key:1}))}}};export{wt as _,$t as a,ft as u};
